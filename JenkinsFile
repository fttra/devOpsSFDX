node {
    def sfdxHome = tool 'sfdx'

           
    //username
    def HUB_ORG=env.HUB_ORG_DH
    //SF org URL
    def SFDC_HOST = env.SFDC_HOST_DH
    //consumer key
    def CONNECTED_APP_CONSUMER_KEY=env.CONNECTED_APP_CONSUMER_KEY_DH
    //credentials
    def JWT_KEY_CRED_ID = env.JWT_CRED_ID_DH

    stage ('Print login info'){
    println HUB_ORG_DH
    println SFDC_HOST
    println CONNECTED_APP_CONSUMER_KEY
    println JWT_KEY_CRED_ID
    }
        stage('Deploye Code') {
            	def rc = bat returnStatus: true, script: "\"${sfdxHome}/sfdx\" force:auth:jwt:grant  -u ${HUB_ORG} -f ${JWT_KEY_CRED_ID} -i ${CONNECTED_APP_CONSUMER_KEY}"
            	if (rc != 0) { error 'hub org authorization failed' }

		println rc
			
		def acc = bat returnStdout: true, script: "\"${sfdxHome}/sfdx\" force:data:record:get -s Account -i 0017Q000005CIF9 -u ${HUB_ORG}"
    		if (acc!= 0) { error 'hub org authorization failed' }
		
		println acc
	 
        }
	
}


