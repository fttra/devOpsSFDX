node {
    def sfdxHome = tool 'sfdx'
    def BUILD_NUMBER=env.BUILD_NUMBER
    def RUN_ARTIFACT_DIR="tests/${BUILD_NUMBER}"
    def SFDC_USERNAME

    def HUB_ORG=env.HUB_ORG_DH
    def SFDC_HOST = env.SFDC_HOST_DH
    def JWT_KEY_CRED_ID = env.JWT_CRED_ID_DH
    def CONNECTED_APP_CONSUMER_KEY=env.CONNECTED_APP_CONSUMER_KEY_DH

    println 'KEY IS' 
    println JWT_KEY_CRED_ID
    println HUB_ORG
    println SFDC_HOST
    println CONNECTED_APP_CONSUMER_KEY
    
    stage('checkout source') {
        checkout scm
    }    
    
    stage('a'){
        def response = sh(returnStdout: true,script: "set +x && curl -X GET -H \"Authorization: Bearer ${token}\" -H \"Content-Type: application/json; charset=UTF-8\" -H \"Accept: application/json\" https://mypmi.my.salesforce.com/services/data/v49.0/tooling/query/?q=Select+id,SandboxName,Description+from+SandboxInfo")
    def sandboxes = readJSON text: response
    return sandboxes
    }

}
